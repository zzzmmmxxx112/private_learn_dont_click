# .github/workflows/test_book_borrowing.yml
name: 图书借阅功能测试  # 工作流名称

# 触发条件：推送到main/develop分支、或对这些分支发起PR时运行
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

# 工作流任务定义
jobs:
  test:
    # 运行环境：最新版Ubuntu
    runs-on: ubuntu-latest

    # 任务步骤
    steps:
      # 步骤1：检出代码到运行环境（必备）
      - name: 检出代码
        uses: actions/checkout@v4

      # 步骤2：设置Python环境（匹配测试脚本的Python版本）
      - name: 设置Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.8'  # 可根据实际需求调整（3.7+均可）
          # cache: 'pip'  # 缓存pip依赖，加速后续运行

      # 步骤3：安装测试依赖（仅需pytest）
      - name: 安装依赖
        run: |
          python -m pip install --upgrade pip
          pip install pytest  # 安装测试框架

      # 步骤4：运行测试脚本，输出详细日志
      - name: 执行借阅功能测试
        run: |
          pytest test_script_4_1.py -v  # -v 显示详细测试结果
