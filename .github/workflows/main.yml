# 工作流名称
name: Test Checkout Service (Python 3.13)

# 触发条件：推送到main分支、对main分支发起PR时执行
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# 定义作业
jobs:
  test:
    # 运行环境：最新版Ubuntu
    runs-on: ubuntu-latest
    
    # 作业步骤
    steps:
      # 步骤1：检出代码到运行环境
      - name: Checkout code
        uses: actions/checkout@v4

      # 步骤2：配置Python 3.13环境
      - name: Set up Python 3.13
        uses: actions/setup-python@v5
        with:
          python-version: '3.13'  # 指定Python版本
          # cache: 'pip'  # 缓存pip依赖，加速后续运行

      # 步骤3：升级pip并安装依赖（Flask、requests）
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install flask requests

      # 步骤4：执行测试脚本
      - name: Run checkout service test
        run: python test_script_6_1.py
